<!DOCTYPE html>
<html lang="en">

    <head>

        <title>NGL - embedded</title>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

        <style>
            * {
                margin: 0;
                padding: 0;
            }
            html, body {
                width: 100%;
                height: 100%;
                overflow: hidden;
            }
            input {
                font-size: 2em;
            }
        </style>

    </head>

    <body>

        <script src="../js/build/ngl.embedded.min.js"></script>
        <script src="../js/three/Detector.js"></script>

        <script>

            if( !Detector.webgl ) Detector.addGetWebGLMessage();

            NGL.mainScriptFilePath = "../js/build/ngl.embedded.min.js";

            // Datasources

            NGL.DatasourceRegistry.add(
                "data", new NGL.StaticDatasource( "../data/" )
            );

            document.addEventListener( "DOMContentLoaded", function(){
                var stage = new NGL.Stage( "viewport" );
                stage.viewer.container.addEventListener( "dblclick", function(){
                    stage.toggleFullscreen();
                } );
                function handleResize(){ stage.handleResize(); }
                window.addEventListener( "orientationchange", handleResize, false );
                window.addEventListener( "resize", handleResize, false );
                var load = NGL.GET( "load" );
                if( load ) stage.loadFile( load, { defaultRepresentation: true } );

                document.getElementById( "pdbidInput" ).addEventListener( "keydown", function( e ){
                    if( e.keyCode === 13 ){
                        stage.removeAllComponents();
                        stage.loadFile( "rcsb://" + e.target.value, {
                            defaultRepresentation: true
                        } );
                        e.target.value = "";
                        e.target.blur();
                    }
                } );

            } );

        </script>

        <div id="viewport" style="width:100%; height:100%;"></div>

        <div style="text-align:center; position:relative; bottom:3em;">
            <div style="display:inline-block;">
                <input id="pdbidInput" style="opacity:0.7; width:4em;"/>
            </div>
        </div>

    </body>

</html>
